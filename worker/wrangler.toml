name = "vnsh"
main = "src/index.ts"
compatibility_date = "2024-12-30"
compatibility_flags = ["nodejs_compat"]

# R2 bucket for blob storage
[[r2_buckets]]
binding = "VNSH_STORE"
bucket_name = "vnsh-store"

# KV namespace for metadata (expiry, payment info)
[[kv_namespaces]]
binding = "VNSH_META"
id = "67d2bdbe539e4620a20a65be26744a5e"

# Cron trigger: clean up expired R2 blobs daily at 03:00 UTC
[triggers]
crons = ["0 3 * * *"]

# Note: Static assets removed - all HTML is served inline from worker

# Environment variables (set via wrangler secret)
# JWT_SECRET - for signing payment tokens
# STRIPE_SECRET_KEY - for Stripe API
# LIGHTNING_API_KEY - for Lightning payments
